{% extends 'base.html' %} {% block content %}
<div class="container">
  <nav style="margin: 1rem">
    <div class="nav-wrapper">
      <form
        action="https://www.google.com/maps/"
        method="get"
        name="searchform"
        target="_blank"
      >
        <div class="input-field">
          <input
            id="searchbar"
            onkeyup="search_pantry()"
            type="search"
            required
            autocomplete="on"
            class="white"
            name="search"
            placeholder="Search for a pantry"
            required="required"
            type="text"
          />
          <label class="label-icon" for="search"
            ><i class="material-icons">search</i></label
          >
          <i class="material-icons">close</i>
        </div>
      </form>
    </div>
  </nav>

  {% for pantry in pantries %}
  <div class="container" id="list">
    <a
      href="{% url 'detail' pantry.id %}"
      style="text-decoration: none; color: black"
    >
      <div class="card pantry">
        <div class="container">
          <div class="row">
            <div class="col s6">
              <img
                style="width: 60%; height: 60%; padding-top: 2rem"
                src="https://patch.com/img/cdn/users/14036/2013/03/raw/23563e92c559ea5bbb881d656a8482ab.jpg"
                alt="food pantry img "
                srcset=""
              />
            </div>
            <div class="col s1"></div>
            <div class="col s6">
              <h2 class="orange-text darken-2">{{ pantry.name }}</h2>
              <p>Info: {{ pantry.description }}</p>
              <p>Location: {{ pantry.location }}</p>
            </div>
          </div>
        </div>
      </div>
    </a>
  </div>

  {% endfor %}
</div>

<script>
  // JavaScript code
  function search_pantry() {
    let input = document.getElementById("searchbar").value;
    input = input.toLowerCase();
    let x = document.getElementsByClassName("pantry");

    for (i = 0; i < x.length; i++) {
      if (!x[i].innerHTML.toLowerCase().includes(input)) {
        x[i].style.display = "none";
      } else {
        x[i].style.display = "list-item";
      }
    }
  }
</script>

{% endblock %}
